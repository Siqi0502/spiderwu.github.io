---
layout:     post
title:      数据分析中的python
subtitle:   字符串常用魔法
date:       2019-08-07
author:     SQ
header-img: img/post-bg-cook.jpg
catalog: true
tags:
    - python
---
## 前言

这篇文章主要介绍python在数据分析中的字符串的常用魔法,结合实例形式总结字符串常用魔法的概念、功能、使用方法以及相关注意事项。

## 常用魔法

### join

> 字符串拼接：将字符串中的每一个元素按照**指定的分隔符**进行拼接

```python
test = '你是风儿我是沙'
v = ' '.join(test)

#输出
你是风儿我是沙
你 是 风 儿 我 是 沙
```

字符串拼接拓展：

1. 连接少量字符串时，可以使用 **+** 号操作符 或者 **f-string**
2. 连接大量字符串时，推荐使用 **join** 和 **f-string**

### find

> 子序列查找：根据传入的参数寻找子序列，找到**第一个**后，获取其位置
>
> 参数：sub 指定要查找的子序列
>
> ​			start和end 指定寻找的区间

```python
test = 'hello world'
v = test.find('o',3,-1)
v1 = test.find('o',1,4)
#输出
4
-1
```

通过上面的实例及输出，可以发现：

1. 在找到第一个符合传入的参数sub后，停止查找并获取sub在字符串中所在的位置(或者说下标)
2. 通过输出v和v1，得到的位置(下标)是在整个字符串中的位置，**而当返回为-1时，则为传入的指定区间的末尾，并非整个字符串的末尾**

### split与rsplit

> 字符串分割：以传入参数为分割符，默认将字符串全部分割
>
> split：默认从左往右进行分割；rsplit：指定从右往左进行分割
>
> 参数：sep 指定分割符
>
> ​			maxsplit 指定分割次数

```python
test = 'hello world'
v = test.split('l',2)
v1 = test.split('l',10)

#输出
['he', '', 'o world']
['he', '', 'o wor', 'd']
```

通过输出对比，不难发现split需要注意的地方有：

1. 分割时，传入参数的匹配可视为**贪婪匹配**，如实例中v的输出为连续的 l 分割符视为一个整体进行前后分割
2. 结果输出并**不会**输出分割符
3. 分割次数若大于字符串中含有的分割符个数，不会报错，仅输出为最大分割次数所得到的结果

### replace

> 替换：字符串中的指定子序列与传入参数进行替换
>
> 参数：old	指定被替换的子序列
>
> ​			new	传入替换的参数
>
> ​			count	替换个数(次数)，默认为全部替换

```python
test = 'hello world'
v = test.replace('hello','hi',2)

#输出
hi world
```

### strip

> 移除指定的字符串，并**优先最多匹配**，默认(即不传入参数时)情况下，去除左右空白以及 \t 、\n
>
> lstrip：指定**从左往右**进行匹配并移除
>
> rstrip：指定**从右往左**进行匹配并移除

```python
test = 'xaxexxaleaxaae'
v = test.strip('xa')
v1 = test.lstrip('xa')
v2 = test.rstrip('xae')

#输出v
exxaleaxaae
#输出v1
exxaleaxaa
#输出v2
xaxexxal
```

strip使用总结：

1. 所谓优先最多匹配，指的是先传入参数为整体进行匹配，如果匹配不上再分解为单个字符或字符组合去进行匹配，如v2中传入的参数为xae，并指定从右往左进行匹配，匹配时优先顺序为 **xae — xa、ae — x、a、e**
2. strip是指从字符串的**左右两边**进行匹配移除，并**停止于**所谓匹配优先顺序中的所有情况都匹配不上



